<h1>Posts Details</h1>

<h3>
<!----------------------------------------------------------------------------->
<!--                Favourite status                                         -->
<!----------------------------------------------------------------------------->
<% if user_signed_in? %>
	<%= render "/favourites/favourite", mypost: @post, count: true %>
<% end %>

<!----------------------------------------------------------------------------->
<%= @post.title %></h3>
<hr>
<p><%= @post.body %></p>
<hr>
<p>By: <%= @post.user_name %> on <%= formatted_date( @post.created_at ) %></p>
<br>
<p>Category:  <%=@post.category_title %> </p>
<br>
<p>Tags:  <%=@post.tags.map { |x| x.name }.join(', ') %> </p>
<br>
<% if can? :edit, @post %>
<%= link_to "Edit", edit_post_path( @post ), class: "btn btn-info" %>
<% end %>
<% if can? :destroy, @post %>
<%= link_to "Delete", post_path( @post ), class: "btn btn-danger", method: :delete, data: {confirm: "Are you sure you want to delete this post?"} %>
<% end %>

<!----------------------------------------------------------------------------->
<!--                       Voting                                            -->
<!----------------------------------------------------------------------------->
<% if user_signed_in? %>
	<%= render "/votes/vote" %>
<% end %>

<!----------------------------------------------------------------------------->
<!--                       Comments                                          -->
<!----------------------------------------------------------------------------->
<h2>Make a comment:</h2>

<%= render "/shared/standard_errors", object: @comment %>
<%= render "/comments/form" %>

	
<h2>Comments: <%= @post.comments.count %></h2>
<div class="comments">
	<% @post.get_comments_in_order.each do |c| %>
		<%= render "/comments/comment", c: c %>
	<% end %>
</div>
